{"version":3,"sources":["Images/POI-thumbnails sync /^/.//.*$","Images/POI-thumbnails/Australia/11_Sep_1914.jpg","Images/POI-thumbnails/Australia/12_Sep_1914.jpg","Images/POI-thumbnails/Australia/1916.jpg","Images/POI-thumbnails/Australia/1_August_1914.jpeg","Images/POI-thumbnails/Australia/25_April_1915.jpg","Images/POI-thumbnails/Australia/27_Oct_1915.jpg","Images/POI-thumbnails/Australia/28_June_1918.jpg","Images/POI-thumbnails/Australia/4_August_1914.jpg","Images/POI-thumbnails/Australia/4_July_1918.jpg","Images/POI-thumbnails/Australia/9_Nov_1914.jpg","Images/POI-thumbnails/World/1_July_1916.jpg","Images/POI-thumbnails/World/21_March_1918.jpg","Images/POI-thumbnails/World/22_Sep_1915.jpeg","Images/POI-thumbnails/World/23_May_1915.jpg","Images/POI-thumbnails/World/28_June_1914.jpeg","Images/POI-thumbnails/World/31_May_1916.jpeg","Images/POI-thumbnails/World/5_July_1914.jpg","Images/POI-thumbnails/World/6_April_1917.jpeg","Images/POI-thumbnails/World/Dec_1914.jpg","Images/POI-thumbnails/World/Feb_1917.jpeg","Images/POI-posters sync /^/.//.*$","Images/POI-posters/Australia/11_Sep_1914.png","Images/POI-posters/Australia/12_Sep_1914.png","Images/POI-posters/Australia/1916.png","Images/POI-posters/Australia/1_August_1914.png","Images/POI-posters/Australia/25_April_1915.png","Images/POI-posters/Australia/27_Oct_1915.png","Images/POI-posters/Australia/28_June_1918.png","Images/POI-posters/Australia/4_August_1914.png","Images/POI-posters/Australia/4_July_1918.png","Images/POI-posters/Australia/9_Nov_1914.png","Images/POI-posters/World/1_July_1916.png","Images/POI-posters/World/21_March_1918.png","Images/POI-posters/World/22_Sep_1915.png","Images/POI-posters/World/23_May_1915.png","Images/POI-posters/World/28_June_1914.png","Images/POI-posters/World/31_May_1916.png","Images/POI-posters/World/5_July_1914.png","Images/POI-posters/World/6_April_1917.png","Images/POI-posters/World/Dec_1914.png","Images/POI-posters/World/Feb_1917.png","Images/earth-reduced.jpg","Images/australia-reduced.jpg","Images/brickWall.jpg","Platform/Line.js","Platform/TextLabel.js","Platform/Platform.js","Events/EventContext.js","Events/CameraTravese.js","Events/ModelContext.js","Events/InfoPopup.js","Events/PoIMarker.js","Events/PoIMarkerGroup.js","Events/PoIThumbnail.js","Events/PoIThumbnailGroup.js","Events/HtmlAlbum.js","Events/PoIPoster.js","Events/PoIPosterGroup.js","More/AboutUs.js","Events/PoICollection.js","More/Birds.js","More/MoreButton.js","More/MoreCollection.js","Scene.js","App.js","ReactTest/reportWebVitals.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Line","props","x_start","y_start","x_end","ref","useRef","y_end","type","index","month","year","platformSetting","verticalStartCoordinate","horizontalStartCoordinate","horizontalInterval","monthInterval","points","useMemo","THREE","onUpdate","useCallback","self","setFromPoints","position","attach","color","linewidth","linecap","linejoin","TextLabel","loader","request","XMLHttpRequest","open","send","my_JSON_object","JSON","parse","responseText","textOptions","font","size","height","rotation","args","text","Platform","verStart","verInt","horiStart","horiInt","platformSettings","verticalInterval","lineList","indicator","label","i","push","j","toString","colour","console","log","EventContext","React","createContext","eventState","setEventState","timelinePos","setTimelinePos","activePoster","setActivePoster","items","setItems","loaded","setLoaded","ambientIntensity","setAmbientIntensity","TimelineState","TWEEN","require","tweenCamera","camera","targetCoords","finishCallback","cameraTargetQuat","duration","posterPosOffset","zoomInPosOffset","zoomInTargetOffset","birdOffset","cameraCurrentPos","copy","cameraTargetPos","targetObjectPos","cameraCurrentQuat","quaternion","set","lookAt","posTween","Tween","to","easing","Easing","Quadratic","InOut","onComplete","viewTween","start","ModelContext","globeTexture","australiaTexture","wallTexture","frameModel","InfoPopup","Html","className","PoIMarker","useContext","useThree","geometry","category","useState","hovered","setHover","scale","onClick","curPosition","onPointerOver","hoverIn","onPointerOut","hoverOut","PoIMarkerGroup","markerList","markers","eventData","events","forEach","element","dateToCoordinate","date","posterPosList","title","makeMarkers","x","day","Date","getFullYear","getMonth","getDate","error","PoIThumbnail","textureImg","event","thumbnail","texture","load","default","onPointerEnter","onPointerLeave","PoIThumbnailGroup","thumbnailList","rotY","Math","PI","rotX","offsetX","offsetY","thumbnails","ausIndex","worldIndex","pos","rot","makeThumbnails","HtmlAlbum","shuffle","setIndex","useLayoutEffect","stringify","databaseQuery","fetch","databaseUrl","databaseID","then","res","json","response","result","records","albumPics","filter","imageField","startsWith","slice","item","contentField","replaceAll","visible","src","length","PoIPoster","model","setModel","container","posterImg","poster","jimp","scene","imageHeight","setImageHeight","croppedTexture","setCroppedTexture","posZ","setPosZ","posX","posY","wheelMovement","deltaY","handleClick","read","image","bitmap","crop","getBase64Async","AUTO","cropped","catch","GLTFLoader","dracoLoader","DRACOLoader","setDecoderPath","setDRACOLoader","gltf","add","undefined","onWheel","needsUpdate","PoIPosterGroup","posterList","posters","makePosters","AboutUs","birdPosition","AboutUsHtml","PoICollection","lightPos","SetlightPos","lightTarget","SetlightTarget","lightIntensity","SetlightIntensity","ambientLight","intensity","light","angle","posterXOffset","posterYOffset","posterYInterval","posterZ","positions","australiaIndex","calcPosterPos","onHoverIn","onHoverOut","onPointerMissed","y","z","Bird","speed","factor","url","useLoader","nodes","materials","animations","group","mesh","random","mixer","useEffect","clipAction","current","play","useFrame","state","delta","sin","clock","elapsedTime","cos","update","dispose","name","morphTargetDictionary","Object_0","morphTargetInfluences","material","Material_0_COLOR_0","Birds","Array","fill","_","round","bird","MoreButton","MoreCollection","fallback","Scene","onMouseWheel","preventDefault","gl","render","window","addEventListener","passive","removeEventListener","SceneEventController","value","Provider","ModelContextProvider","globeImg","australiaImg","wallImg","Stars","fade","App","Loader","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.2faf90fd.chunk.js","sourcesContent":["var map = {\n\t\"./Australia/11_Sep_1914.jpg\": 135,\n\t\"./Australia/12_Sep_1914.jpg\": 136,\n\t\"./Australia/1916.jpg\": 137,\n\t\"./Australia/1_August_1914.jpeg\": 138,\n\t\"./Australia/25_April_1915.jpg\": 139,\n\t\"./Australia/27_Oct_1915.jpg\": 140,\n\t\"./Australia/28_June_1918.jpg\": 141,\n\t\"./Australia/4_August_1914.jpg\": 142,\n\t\"./Australia/4_July_1918.jpg\": 143,\n\t\"./Australia/9_Nov_1914.jpg\": 144,\n\t\"./World/1_July_1916.jpg\": 145,\n\t\"./World/21_March_1918.jpg\": 146,\n\t\"./World/22_Sep_1915.jpeg\": 147,\n\t\"./World/23_May_1915.jpg\": 148,\n\t\"./World/28_June_1914.jpeg\": 149,\n\t\"./World/31_May_1916.jpeg\": 150,\n\t\"./World/5_July_1914.jpg\": 151,\n\t\"./World/6_April_1917.jpeg\": 152,\n\t\"./World/Dec_1914.jpg\": 153,\n\t\"./World/Feb_1917.jpeg\": 154\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 134;","export default __webpack_public_path__ + \"static/media/11_Sep_1914.93adacd4.jpg\";","export default __webpack_public_path__ + \"static/media/12_Sep_1914.1bef2401.jpg\";","export default __webpack_public_path__ + \"static/media/1916.3d36988c.jpg\";","export default __webpack_public_path__ + \"static/media/1_August_1914.bd5a7d37.jpeg\";","export default __webpack_public_path__ + \"static/media/25_April_1915.4df819b9.jpg\";","export default __webpack_public_path__ + \"static/media/27_Oct_1915.358e1fea.jpg\";","export default __webpack_public_path__ + \"static/media/28_June_1918.2e76416a.jpg\";","export default __webpack_public_path__ + \"static/media/4_August_1914.a13899eb.jpg\";","export default __webpack_public_path__ + \"static/media/4_July_1918.5372f4f1.jpg\";","export default __webpack_public_path__ + \"static/media/9_Nov_1914.e9caed92.jpg\";","export default __webpack_public_path__ + \"static/media/1_July_1916.c400dd99.jpg\";","export default __webpack_public_path__ + \"static/media/21_March_1918.8e263ce4.jpg\";","export default __webpack_public_path__ + \"static/media/22_Sep_1915.0656acc1.jpeg\";","export default __webpack_public_path__ + \"static/media/23_May_1915.41d55c79.jpg\";","export default __webpack_public_path__ + \"static/media/28_June_1914.d2dae488.jpeg\";","export default __webpack_public_path__ + \"static/media/31_May_1916.a03a18c1.jpeg\";","export default __webpack_public_path__ + \"static/media/5_July_1914.d710d2e0.jpg\";","export default __webpack_public_path__ + \"static/media/6_April_1917.0aa5578d.jpeg\";","export default __webpack_public_path__ + \"static/media/Dec_1914.5cabf770.jpg\";","export default __webpack_public_path__ + \"static/media/Feb_1917.d348a811.jpeg\";","var map = {\n\t\"./Australia/11_Sep_1914.png\": 185,\n\t\"./Australia/12_Sep_1914.png\": 186,\n\t\"./Australia/1916.png\": 187,\n\t\"./Australia/1_August_1914.png\": 188,\n\t\"./Australia/25_April_1915.png\": 189,\n\t\"./Australia/27_Oct_1915.png\": 190,\n\t\"./Australia/28_June_1918.png\": 191,\n\t\"./Australia/4_August_1914.png\": 192,\n\t\"./Australia/4_July_1918.png\": 193,\n\t\"./Australia/9_Nov_1914.png\": 194,\n\t\"./World/1_July_1916.png\": 195,\n\t\"./World/21_March_1918.png\": 196,\n\t\"./World/22_Sep_1915.png\": 197,\n\t\"./World/23_May_1915.png\": 198,\n\t\"./World/28_June_1914.png\": 199,\n\t\"./World/31_May_1916.png\": 200,\n\t\"./World/5_July_1914.png\": 201,\n\t\"./World/6_April_1917.png\": 202,\n\t\"./World/Dec_1914.png\": 203,\n\t\"./World/Feb_1917.png\": 204\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 184;","export default __webpack_public_path__ + \"static/media/11_Sep_1914.0be5ff81.png\";","export default __webpack_public_path__ + \"static/media/12_Sep_1914.e6afada1.png\";","export default __webpack_public_path__ + \"static/media/1916.7400835f.png\";","export default __webpack_public_path__ + \"static/media/1_August_1914.d557dcac.png\";","export default __webpack_public_path__ + \"static/media/25_April_1915.1b9ab10e.png\";","export default __webpack_public_path__ + \"static/media/27_Oct_1915.0325f3c3.png\";","export default __webpack_public_path__ + \"static/media/28_June_1918.69317d61.png\";","export default __webpack_public_path__ + \"static/media/4_August_1914.92200e4e.png\";","export default __webpack_public_path__ + \"static/media/4_July_1918.952888e9.png\";","export default __webpack_public_path__ + \"static/media/9_Nov_1914.578ae428.png\";","export default __webpack_public_path__ + \"static/media/1_July_1916.e624380e.png\";","export default __webpack_public_path__ + \"static/media/21_March_1918.8370f413.png\";","export default __webpack_public_path__ + \"static/media/22_Sep_1915.2d3a4446.png\";","export default __webpack_public_path__ + \"static/media/23_May_1915.a5cab375.png\";","export default __webpack_public_path__ + \"static/media/28_June_1914.d9bb3932.png\";","export default __webpack_public_path__ + \"static/media/31_May_1916.e75455ad.png\";","export default __webpack_public_path__ + \"static/media/5_July_1914.13214d84.png\";","export default __webpack_public_path__ + \"static/media/6_April_1917.901869ad.png\";","export default __webpack_public_path__ + \"static/media/Dec_1914.8a8e61da.png\";","export default __webpack_public_path__ + \"static/media/Feb_1917.45a2c11f.png\";","export default __webpack_public_path__ + \"static/media/earth-reduced.dc07ce7b.jpg\";","export default __webpack_public_path__ + \"static/media/australia-reduced.e9c8e7ec.jpg\";","export default __webpack_public_path__ + \"static/media/brickWall.5ddb5a89.jpg\";","import React, {useMemo, useCallback, useRef} from 'react'\nimport * as THREE from 'three'\n\nconst Line = (props) => {\n    const ref = useRef();\n\n    let x_start, y_start, x_end, y_end = 0;\n\n    if (props.type === 'vertical') {\n        x_start = props.index;\n        x_end = props.index;\n        y_start = 0;\n        y_end = 200;\n    }\n\n    if (props.type === 'horizontal') {\n        x_start = -20;\n        x_end = 20;\n        y_start = props.index;\n        y_end = props.index;\n    }\n\n    if (props.type === 'monthIndicator') {\n        let month = props.index % 100 - 1, year = props.index / 100;\n        if (month === 5) {\n            x_start = props.platformSetting.verticalStartCoordinate - 3;\n        } else {\n            x_start = props.platformSetting.verticalStartCoordinate - 1.5;\n        }\n        x_end = props.platformSetting.verticalStartCoordinate;\n        y_start = y_end = props.platformSetting.horizontalStartCoordinate\n            + (year - 14) * props.platformSetting.horizontalInterval +\n            props.platformSetting.monthInterval * month;\n    }\n\n    const points = useMemo(() =>\n        [new THREE.Vector3(x_start, y_start, 0), new THREE.Vector3(x_end, y_end, 0)], []);\n    const onUpdate = useCallback(self => self.setFromPoints(points), [points]);\n\n    return (\n        <line position={[0, 0, -1]} ref={ref}>\n            <bufferGeometry attach=\"geometry\" onUpdate={onUpdate}/>\n            <lineBasicMaterial attach=\"material\" color={'#ffffff'} linewidth={100} linecap={'round'} linejoin={'round'}/>\n            {/* <meshLambertMaterial attach=\"material\" emissive={'#ffffff'}/> */}\n        </line>\n    )\n}\n\nexport default Line;","import * as THREE from 'three';\nimport React, { useRef } from 'react'\n\n\nconst TextLabel = (props) => {\n\n    /*\n     This solution works but not implemented by JSX\n     */\n\n    const ref = useRef();\n    const loader = new THREE.FontLoader();\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", \"./Fonts/helvetiker_regular.typeface.json\", false);\n    request.send(null)\n    const my_JSON_object = JSON.parse(request.responseText);\n    const font = loader.parse(my_JSON_object);\n\n    const textOptions = {\n        font,\n        size: 1.5,\n        height: 0.2,\n    };\n\n    if (props.height && props.size) {\n        textOptions.height = props.height\n        textOptions.size = props.size\n    }\n\n    /*\n    The JSX implementation\n    The loader.parse needs a json obj, the JSON.parse need a serialized string as arg\n    Thus, the correct imp is open the file with request and pass in the content text\n    ! This is the common pattern of deserializing obj from JSON file in JS !\n     */\n\n    return (\n        <mesh rotation={props.rotation ? props.rotation : [1.5708, 0, 0]}\n              position={props.position ? props.position : [0,0,0]} ref={ref}>\n            <textGeometry attach={'geometry'} args={[props.text, textOptions]} />\n            <meshBasicMaterial attach=\"material\" color={\"#ffffff\"} />\n        </mesh>\n    )\n\n}\n\nexport default TextLabel;","import Line from './Line'\nimport React from \"react\";\nimport TextLabel from \"./TextLabel\";\n\n\nconst Platform = (props) => {\n\n    let verStart, verInt, horiStart, horiInt;\n\n    verStart = props.platformSettings.verticalStartCoordinate;\n    verInt = props.platformSettings.verticalInterval;\n    horiStart = props.platformSettings.horizontalStartCoordinate;\n    horiInt = props.platformSettings.horizontalInterval;\n\n    const lineList = [];\n    const indicator = [];\n    const label = []\n\n\n    // the index props for vertical line stands for the coordinate at x axis\n    for (let i = 0; i < 5; i++) {\n        lineList.push(<Line index={verStart +\n            i * verInt} type={'vertical'} key={\"ver\" + i} />);\n    }\n\n    // the index props for horizontal line stands for the y coordinate\n    for (let i = 0; i < 6; i++) {\n        lineList.push(<Line index={horiStart +\n            i * horiInt} type={'horizontal'} key={\"hor\" + i} />);\n    }\n\n    // the index props for monthIndicator stands for the year and month\n    // e.g. index = 1402 will be interpreted as 02/1914, no additional indicator for Jan.\n    for (let i = 14; i < 19; i++) {\n        for (let j = 2; j < 13; j++) {\n            indicator.push(<Line index={i * 100 + j} type={'monthIndicator'}\n                platformSetting={props.platformSettings} key={100 * i + j} />);\n        }\n        label.push(<TextLabel position={[verStart - 9,\n        horiStart + (i - 14) * horiInt, -3]} text={(1900 + i).toString()}\n            colour={\"#ffffff\"}\n            key={i} />)\n    }\n    label.push(<TextLabel position={[verStart - 9,\n    horiStart + (19 - 14) * horiInt, -3]} text={(1900 + 19).toString()}\n        colour={\"#ffffff\"}\n        key=\"end\" />);\n    label.push(<TextLabel position={[props.platformSettings.verticalStartCoordinate,\n        props.platformSettings.horizontalStartCoordinate, -3]} text={\"Australia\"} key=\"Australia\" colour={\"#ffff00\"} />)\n    label.push(<TextLabel position={[props.platformSettings.verticalStartCoordinate + 12.5,\n        props.platformSettings.horizontalStartCoordinate, -3]} text={\"World\"} key=\"World\" colour={\"#ffff00\"} />)\n    // these are the category labels\n    console.log(label)\n\n    return (\n        <group>\n            {lineList}\n            {indicator}\n            {label}\n        </group>\n    )\n\n}\n\nexport default Platform;","// this is the context file for event\nimport React from \"react\"\n\n// event context used to manage the 'state' that allows different interactions\n// timeline: user can scroll timeline, click PoI objects to zoom in\n// poi: user can click empty space to go back, click gallery to change photo\n// zoomed: user can scroll to move around the poi texture\n// disabled: disable all events\n\nexport const EventContext = React.createContext({\n    eventState: \"timeline\",\n    setEventState: () => { }, // assigned by provider\n    timelinePos: [0,0,0],\n    setTimelinePos: () => {},\n    activePoster: null,\n    setActivePoster: () => {},\n    items: [],\n    setItems: () => {},\n    loaded:false,\n    setLoaded: () => {},\n    ambientIntensity:0,\n    setAmbientIntensity: () => {},\n})\n\nexport const TimelineState = {\n    TIMELINE: \"timeline\",\n    PoI: \"poi\",\n    ZOOM: \"zoomed\",\n    DISABLED: \"disabled\",\n    BIRD: \"bird\",\n    INFO:\"info\"\n}\n\n","import * as THREE from \"three\";\nimport {useMemo} from \"react\";\n\nconst TWEEN = require('@tweenjs/tween.js');\n\n\nexport default function tweenCamera(camera, targetCoords, type, finishCallback, duration = 1000) {\n\n\n    // offset for traversal towards the poster\n    const posterPosOffset = [0, -5.5, 0]\n    const zoomInPosOffset = [2.1, -4, 1.2]\n    const zoomInTargetOffset = [2.1, 0, 1.2]\n    const birdOffset = [0, 25, 20]\n    const cameraCurrentPos = new THREE.Vector3().copy(camera.position);\n    const cameraTargetPos = new THREE.Vector3(\n        targetCoords[0],\n        targetCoords[1],\n        targetCoords[2]);\n    //const cameraAngle = new THREE.Vector3().copy( camera.rotation );\n    const targetObjectPos = new THREE.Vector3(\n        targetCoords[0],\n        targetCoords[1],\n        targetCoords[2]);\n\n\n    // obtain current and target quaternion\n    // is this the best way???\n    const cameraCurrentQuat = new THREE.Quaternion().copy(camera.quaternion);\n    let cameraTargetQuat;\n    if (type === \"toTimeline\") {\n\n        // for going back to timeline\n        camera.position.set(0, -10, 5)\n        targetObjectPos.set(0, 5, 0)\n\n    } else if (type === \"poiZoomIn\") {\n\n        cameraTargetPos.set(\n            targetCoords[0] + zoomInPosOffset[0],\n            targetCoords[1] + zoomInPosOffset[1],\n            targetCoords[2] + zoomInPosOffset[2])\n        // target object stays same\n\n        targetObjectPos.set(\n            targetCoords[0] + zoomInTargetOffset[0],\n            targetCoords[1] + zoomInTargetOffset[1],\n            targetCoords[2] + zoomInTargetOffset[2])\n        camera.position.copy(cameraTargetPos)\n    } else if (type === \"bird\") {\n\n\n        cameraTargetPos.set(\n            targetCoords[0] + birdOffset[0],\n            targetCoords[1] + birdOffset[1],\n            targetCoords[2] + birdOffset[2])\n\n        targetObjectPos.set(\n            targetCoords[0],\n            targetCoords[1],\n            targetCoords[2])\n\n        camera.position.copy(cameraTargetPos)\n\n    } else {\n\n        cameraTargetPos.set(\n            targetCoords[0] + posterPosOffset[0],\n            targetCoords[1] + posterPosOffset[1],\n            targetCoords[2] + posterPosOffset[2])\n        camera.position.copy(cameraTargetPos)\n    }\n\n    camera.lookAt(targetObjectPos)\n    cameraTargetQuat = new THREE.Quaternion().copy(camera.quaternion);\n\n    camera.position.copy(cameraCurrentPos);\n    camera.quaternion.copy(cameraCurrentQuat)\n\n    // this is the tween to interpolate the position\n    let posTween = new TWEEN.Tween(cameraCurrentPos)\n        .to(cameraTargetPos, duration)\n        .easing(TWEEN.Easing.Quadratic.InOut)\n        .onUpdate(() => {\n            camera.position.copy(cameraCurrentPos);\n            //camera.lookAt(targetObjectPos);\n        })\n        .onComplete(() => {\n            camera.position.copy(cameraTargetPos);\n            finishCallback();\n            //camera.lookAt(targetObjectPos);\n        })\n\n    // this is the tween to interpolate camera angle\n    // tried, but I think there's a better way\n    let viewTween = new TWEEN.Tween(cameraCurrentQuat)\n        .to(cameraTargetQuat, duration)\n        .easing(TWEEN.Easing.Quadratic.InOut)\n        .onUpdate(() => camera.quaternion.copy(cameraCurrentQuat))\n        .onComplete(() => camera.quaternion.copy(cameraTargetQuat))\n\n\n\n    posTween.start();\n    viewTween.start();\n}","// this is the context file for textures and models\nimport React from \"react\"\n\n// event context used to manage the 'state' that allows different interactions\n// timeline: user can scroll timeline, click PoI objects to zoom in\n// poi: user can click empty space to go back, click gallery to change photo\n// zoomed: user can scroll to move around the poi texture\n// disabled: disable all events\n\nexport const ModelContext = React.createContext({\n    \n    globeTexture: null,\n    australiaTexture: null,\n    wallTexture: null,\n    frameModel: null\n\n})\n","import {Html} from '@react-three/drei';\n\nexport const InfoPopup = (props) => {\n\n        return (\n            <Html className={props.className}>\n                <div className=\"popup\">\n                    {props.text}\n                </div>\n            </Html>\n        )\n}","import React, { useContext, useState} from 'react'\nimport tweenCamera from \"./CameraTravese\"\nimport { useThree } from \"@react-three/fiber\";\nimport { EventContext, TimelineState } from './EventContext';\nimport * as THREE from \"three\";\nimport { ModelContext } from './ModelContext';\nimport { InfoPopup } from './InfoPopup';\n\n/* \n    This is what draws PoI objects and control events related.\n    \n    Currently, the camera stops at coordinate that has hard-coded offset from the target object.\n    the camera angle is \n    coords[x,y,z] = xyz coordinates of the sphere\n    Get target object??\n    targetCoords[x,y,z] = xyz coordinates of target object (picture)\n    \n    color: color (hex code) of the sphere\n    onClick: function to be executed onClick.\n */\nconst PoIMarker = (props) => {\n    // const textureImg = require(\"../Images/earth-reduced.jpg\")\n    let { eventState, setEventState, setTimelinePos, setActivePoster, setAmbientIntensity } = useContext(EventContext)\n    let { globeTexture, australiaTexture} = useContext(ModelContext)\n    const { camera } = useThree();\n    const geometry = props.category === \"Australia\" ? <planeGeometry args={[3,2]}/> :<sphereGeometry />\n\n    // props has coordinates as array of 3 elements.\n\n    const [hovered, setHover] = useState(false)\n    \n    // const cameraOffset = [0,-5,0]\n\n\n    function handleClick() {\n        const curPosition = new THREE.Vector3().copy(camera.position);\n        if (eventState === TimelineState.TIMELINE) {\n            setEventState(TimelineState.DISABLED);\n            setTimelinePos(curPosition)\n            tweenCamera(camera, props.targetCoords, \"timeline\", () => {\n                setEventState(TimelineState.PoI)\n                setAmbientIntensity(0.5)\n            }\n            );\n            // activate poster\n            setActivePoster(props.index)\n            setHover(false)\n        }\n    }\n\n    function handleHoverIn() {\n\n        if (eventState === TimelineState.TIMELINE) {\n            props.hoverIn(props.index)\n            setHover(true)\n            // display info window\n        }\n    }\n\n    function handleHoverOut() {\n\n        if (eventState === TimelineState.TIMELINE) {\n            props.hoverOut()\n            setHover(false)\n        }\n    }\n\n\n    return (\n        <mesh\n            position={props.position}\n            scale={hovered ? 1.2 : 1}\n            rotation={[1.5708, 0, 0]}\n            onClick={handleClick}\n            onPointerOver={handleHoverIn}\n            onPointerOut={handleHoverOut}\n        >\n            {geometry}\n            <meshBasicMaterial map={props.category === \"World\" ? globeTexture : australiaTexture}/>\n            <InfoPopup text={props.text} className={hovered && eventState === TimelineState.TIMELINE ? \"visible\" : \"invisible\"}/>\n        </mesh>\n\n    )\n\n}\nexport default PoIMarker;","import PoIMarker from './PoIMarker';\nimport React, { useMemo } from 'react'\n\nexport const PoIMarkerGroup = (props) => {\n\n    const markerList = useMemo(() => makeMarkers(), [])\n\n    function dateToCoordinate(date, category){\n        // used to calculate the position of markers\n        let x, y, z, year, month, day;\n        try {\n            date = new Date(date);\n            year = date.getFullYear();\n            month = date.getMonth();\n            day = date.getDate();\n        } catch (error) {\n            console.error(error)\n        }\n\n        // todo need to decide the x axis mapping;\n        x = day/31 * 8\n        if(year === 1914 && (day === 4 || day == 12)){\n            // offset so they don't cascade\n            x += 3\n        }\n\n        y = (year - 1914) * props.platformSettings.horizontalInterval +\n            props.platformSettings.horizontalStartCoordinate +\n            month * props.platformSettings.monthInterval;\n\n        //todo need to decide the mapping of event at z axis\n        z = 0;\n\n        // category offset\n        if(category === \"Australia\"){\n            x = x - 8\n        }\n\n        return [x, y, z];\n    }\n\n    function makeMarkers(){\n        const markers = []\n        props.eventData.events.forEach((element, index) => {\n\n            markers.push(\n                <PoIMarker \n                position={dateToCoordinate(element.date, element.category)}\n                duration={1000} \n                targetCoords={props.posterPosList[index]}\n                index={index}\n                hoverIn={props.hoverIn}\n                hoverOut={props.hoverOut}\n                category={element.category}\n                text={element.title + \", \" + element.date}\n                key={\"marker \" + element.id}/>)\n        })\n        return markers\n    }\n\n    return (\n        <group>\n            {markerList}\n        </group>\n        )\n}\n","import * as THREE from 'three'\nimport React, {useContext, useMemo} from \"react\";\nimport tweenCamera from \"./CameraTravese\";\nimport {EventContext, TimelineState} from \"./EventContext\";\nimport {useThree} from \"@react-three/fiber\";\nimport { ModelContext } from './ModelContext';\n\n\nexport const PoIThumbnail = (props) => {\n    const textureImg = require(\"../Images/POI-thumbnails/\" + props.event.category + \"/\" + props.event.thumbnail)\n    const {\n        eventState,\n        setEventState,\n        setTimelinePos,\n        setActivePoster,\n        setAmbientIntensity\n    } = useContext(EventContext)\n    const {wallTexture} = useContext(ModelContext)\n\n    const {camera} = useThree();\n    // offset from poster\n    // const cameraOffset = [0,-5.5,0]\n\n    function handleClick() {\n        const curPosition = new THREE.Vector3().copy(camera.position);\n        // same as poimarker\n        if (eventState === TimelineState.TIMELINE) {\n            setEventState(TimelineState.DISABLED)\n            console.log(curPosition)\n            setTimelinePos(curPosition)\n\n            tweenCamera(camera, props.targetCoords, \"toPoster\", () => {\n                setEventState(TimelineState.PoI)\n                setAmbientIntensity(0.5)\n            }\n            );\n            setActivePoster(props.index)\n        }\n    }\n\n    function handleHoverIn() {\n\n        if (eventState === TimelineState.TIMELINE) {\n            props.hoverIn(props.index)\n        }\n    }\n\n    function handleHoverOut() {\n\n        if (eventState === TimelineState.TIMELINE) {\n            props.hoverOut()\n        }\n    }\n\n    // load thumbnail texture\n    const texture = useMemo(() => new THREE.TextureLoader().load(textureImg.default), []);\n\n    return (\n\n        <group rotation={props.rotation}\n               position={props.position}\n               onClick={handleClick}\n               onPointerEnter={handleHoverIn}\n               onPointerLeave={handleHoverOut}\n        >\n            <mesh>\n                <planeGeometry args={[9, 9]}/>\n                <meshBasicMaterial map={texture}/>\n            </mesh>\n            <mesh position={[0, 0, -0.3]}>\n                <boxGeometry args={[12.9, 10.8, 0.5]}/>\n                <meshBasicMaterial map={wallTexture}/>\n            </mesh>\n        </group>\n    )\n}\n\n\nexport default PoIThumbnail","import PoIThumbnail from './PoIThumbnail';\nimport React, { useMemo } from 'react'\nimport {TextureLoader} from \"three\";\n\n\nexport const PoIThumbnailGroup = (props) => {\n\n    // const brickTexture = useMemo(() => {\n    //     return new TextureLoader().load(require('../Images/pexels-tim-mossholder-3105407.jpeg').default)\n    // },[])\n\n\n    const thumbnailList = useMemo(() => makeThumbnails(), [])\n    // render thumbnails\n    function makeThumbnails() {\n        \n        const rotY = 90 * Math.PI / 180\n        const rotX = 90 * Math.PI / 180\n        const offsetX = 40\n        const offsetY = 35\n        const thumbnails = []\n        let ausIndex = 0\n        let worldIndex = 0\n        props.eventData.events.forEach((element, index) => {\n\n            let pos = [0, 0, 8]\n            let rot = [rotX, 0, 0]\n            if(element.category === \"Australia\"){\n                pos[0] = -offsetX\n                pos[1] = ausIndex * 13 + offsetY\n                ausIndex++\n                rot[1] = rotY\n            } else{\n\n                pos[0] = offsetX\n                pos[1] = worldIndex * 13 + offsetY\n                worldIndex++\n                rot[1] = -rotY\n            }\n\n            thumbnails.push(<PoIThumbnail\n                event={element}\n                index={index}\n                position={pos}\n                rotation={rot}\n                hoverIn={props.hoverIn}\n                hoverOut={props.hoverOut}\n                targetCoords={props.posterPosList[index]} // to be calculated\n                key={\"thumbnail \" + element.id}\n            />)\n        })\n        return thumbnails\n    }\n\n    return (\n        <group>\n            {thumbnailList}\n        </group>\n        )\n}\n","import {Html} from '@react-three/drei';\nimport React, {useLayoutEffect, useMemo, useState} from \"react\";\n\nexport const HtmlAlbum = (props) => {\n\n    const shuffle = require(\"lodash/shuffle\")\n\n    // img index\n    const [index, setIndex] = useState(0);\n    // get image\n    const [items, setItems] = useState([]);\n\n    const [loaded, setLoaded] = useState(false)\n\n    useLayoutEffect(() => {\n        const databaseUrl = 'https://www.data.qld.gov.au/api/3/action/datastore_search';\n        // make api call\n        console.log(JSON.stringify(props.event.databaseQuery))\n        fetch(databaseUrl + '?q=' + JSON.stringify(props.event.databaseQuery) + '&resource_id=' +\n            props.event.databaseID)\n            .then(res => res.json())\n            .then(response => {\n                setItems(response.result.records);\n                setLoaded(true)\n            })\n    }, [])\n\n\n    const albumPics = useMemo(() => {\n        return shuffle(items.filter(element => {\n            /*\n                filter by date\n             */\n            // let year, month;\n            // if (element[\"temporal\"]) {\n            //     year = new Date(element[\"temporal\"]).getFullYear() - 100;\n            //     month = new Date(element[\"temporal\"]).getMonth()\n            // } else if (element[\"Temporal\"]) {\n            //     year = new Date(element[\"Temporal\"]).getFullYear()\n            // } else {\n            //     throw new Error(\"non defined date\")\n            // }\n            // const eventDate = new Date(props.event[\"date\"])\n\n            /*\n             filter by valid http\n             */\n            return  element[props.event.imageField].startsWith('http')\n        }).slice(0, 5)).map(item => {\n            return [ \"//images.weserv.nl/?url=\" + item[props.event.imageField],\n                item[props.event.contentField].replaceAll(\",\", \"\\n\")];\n        })\n    }, [loaded])\n\n    // const albumPics = [\"../Images/warPic.png\", \"../Images/warPic.png\", \"../Images/warPic.png\", \"../Images/warPic.png\", \"../Images/warPic.png\"]\n    // let variable = \"none\";\n    // // just query the database and filter!\n    // useLayoutEffect(() => {\n    //     fetch('https://www.data.qld.gov.au/api/3/action/datastore_search?resource_id='\n    //         + props.event.databaseID + '&q=' + props.event.query)\n    //         .then((res) => { \n    //             res.json().then((data) => {variable = data; console.log(variable)})\n    //         })\n    // }, [])\n    // console.log(res)\n\n\n    // console.log(filteredPic)\n    return (\n        <group position={props.position}>\n            <Html className={props.visible}>\n                <div className=\"album\">\n                    <img src={loaded ? albumPics[index][0] : \"../Images/warPic.png\"}\n                         onClick={() => setIndex((index + 1) % albumPics.length)}\n                    >\n                    </img>\n                    <h3 className=\"img-desc\">\n                        {loaded ? albumPics[index][1] : \"\"}\n                    </h3>\n                </div>\n            </Html>\n        </group>\n    )\n}\n","import * as THREE from 'three'\nimport React, {useContext, useLayoutEffect, useMemo, useState} from \"react\";\nimport tweenCamera from \"./CameraTravese\";\nimport {EventContext, TimelineState} from \"./EventContext\";\nimport {useThree} from \"@react-three/fiber\";\nimport {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\";\nimport {DRACOLoader} from \"three/examples/jsm/loaders/DRACOLoader\";\nimport { HtmlAlbum } from './HtmlAlbum';\n\n\nconst PoIPoster = (props) => {\n\n    const [model, setModel] = useState(null);\n\n    \n    const container = []\n\n    const {eventState, setEventState, activePoster, setAmbientIntensity} = useContext(EventContext)\n\n    const posterImg = require(\"../Images/POI-posters/\" + props.event.category + \"/\" + props.event.poster)\n\n    // the default ??????\n    const jimp = require('jimp').default;\n\n    const {camera, scene} = useThree();\n\n    const [imageHeight, setImageHeight] = useState(0);\n\n    const [croppedTexture, setCroppedTexture] = useState(null);\n\n    const [posZ, setPosZ] = useState(props.position[2]);\n\n    const posX = props.position[0]\n    const posY = props.position[1];\n\n    const texture = useMemo(() => new THREE.TextureLoader().load(posterImg.default), []);\n    \n\n    function wheelMovement(event) {\n\n        if (activePoster === props.index && eventState === TimelineState.ZOOM) {\n            // enable x scroll, make movement slower\n            setPosZ(posZ - event.deltaY * 0.001)\n        }\n    }\n\n    function handleClick() {\n\n        if (activePoster === props.index) {\n            if (eventState === TimelineState.PoI) {\n\n                // transition to zoom in state\n                \n                setEventState(TimelineState.DISABLED)\n                setPosZ(props.position[2] - imageHeight/440 + 4)\n                \n\n                tweenCamera(camera, props.position, \"poiZoomIn\", () => {\n                    setEventState(TimelineState.ZOOM)\n                }\n                );\n\n            } else if (eventState === TimelineState.ZOOM) {\n\n                // transition back to POI state\n                setEventState(TimelineState.DISABLED)\n                console.log([posX, posY, posZ])\n\n                tweenCamera(camera, props.position, \"poiZoomOut\", () => setEventState(TimelineState.PoI)\n                );\n\n                // tweenCamera(camera, cameraOffset, props.position, [0,0,0], 1000, false,\n                //     () => setEventState(TimelineState.PoI))\n                \n            }\n        }\n    }\n\n\n    useLayoutEffect(() => {\n        jimp.read(posterImg.default)\n            .then(image => {\n                setImageHeight(image.bitmap.height)\n                image.crop(0, 0, 1400, 1800)\n                    .getBase64Async(jimp.AUTO)\n                    .then(cropped => {\n                        setCroppedTexture(new THREE.TextureLoader().load(cropped))\n                    })\n            })\n            .catch(e => console.log(e))\n\n        const loader = new GLTFLoader();\n        const dracoLoader = new DRACOLoader();\n        dracoLoader.setDecoderPath('/examples/js/libs/draco/');\n        loader.setDRACOLoader(dracoLoader);\n\n        loader.load('frame.gltf'\n            , (gltf) => {\n\n                gltf.scene.position.set(posX, posY + 0.1, posZ)\n                gltf.scene.scale.set(8, 7, 7)\n\n                gltf.scene.rotation.set(1.5708, 0, 0)\n                setModel(gltf.scene)\n                 scene.add(gltf.scene)\n            }, undefined, (error) => {\n\n                console.error(error);\n\n            })\n\n\n    }, []);\n\n\n\n    if (croppedTexture) {\n\n        container.push(\n            <mesh onClick={handleClick} onWheel={wheelMovement} rotation={[1.5708, 0, 0]} key={props.index}\n                  visible={eventState !== TimelineState.ZOOM} position={props.position}>\n                <planeGeometry args={[6.5, 7.7]}/>\n                <meshStandardMaterial map={croppedTexture} needsUpdate={true}/>\n            </mesh>)\n    } else {\n        container.push('')\n    }\n\n    if (model) {\n        model.visible = eventState !== TimelineState.ZOOM;\n    }\n\n\n    return (\n        <group>\n            {container}\n            <mesh visible={eventState === TimelineState.ZOOM && activePoster === props.index}\n                  position={[posX,posY,posZ]} rotation={[1.5708, 0, 0]}\n                onClick={handleClick}\n                onWheel={wheelMovement}\n            >\n                <planeGeometry args={[6.5, imageHeight / 220]}/>\n                <meshStandardMaterial map={texture} needsUpdate={true}/>\n            </mesh>\n            <HtmlAlbum event={props.event} position={[posX + 3.5, posY, -1]} visible={eventState === TimelineState.ZOOM\n            && activePoster === props.index ? \"visible\" : \"invisible\"}/>\n        </group>\n    )\n}\n\n\nexport default PoIPoster","import PoIPoster from './PoIPoster'\nimport React, {useContext, useLayoutEffect, useMemo} from 'react'\nimport {EventContext} from \"./EventContext\";\n\nexport const PoIPosterGroup = (props) => {\n\n    const posterList = useMemo(() => makePosters(), [])\n\n    const { setItems, setLoaded} = useContext(EventContext)\n\n\n\n    function makePosters() {\n        const posters = []\n        props.eventData.events.forEach((element, index) => {\n            posters.push(<PoIPoster\n                position={props.posterPosList[index]}\n                event={element}\n                index={index}\n                key={\"poster \" + element.id}\n            />)\n        })\n        return posters\n    }\n\n    return (\n        <group>\n            {posterList}\n        </group>\n        )\n}\n","import React, { useState, useContext, useMemo} from 'react'\nimport tweenCamera from \"../Events/CameraTravese\"\nimport { EventContext, TimelineState } from '../Events/EventContext';\nimport * as THREE from \"three\";\nimport { useThree } from \"@react-three/fiber\";\nimport {Html} from '@react-three/drei';\nimport TextLabel from \"../Platform/TextLabel\";\n\n// this is the component to display the about us page\n// About us only accessible from the timeline state.\n// uses disabled state when looking at about us\nexport const AboutUs = (props) => {\n\n    // just a geometry that takes us to the position\n    let { eventState, setEventState, setActivePoster, activePoster } = useContext(EventContext)\n    const geometry = <planeGeometry args={[20, 5, 1]} />\n    const targetCoords = [props.birdPosition[0],props.birdPosition[1] - 50,props.birdPosition[2] - 20]\n    const { camera } = useThree();\n\n\n    function handleClick() {\n        if (eventState === TimelineState.BIRD) {\n            setEventState(TimelineState.INFO)\n            tweenCamera(camera, targetCoords, \"timeline\", () => {\n                // display the about us html\n                // random number to stop triggering other posters\n                setActivePoster(100)\n            }, 1500);\n            // activate poster\n        }\n    }\n\n\n    return (\n        <mesh\n            position={[props.birdPosition[0] - 6, props.birdPosition[1] , props.birdPosition[2] + 2]}\n            onClick={handleClick}\n            rotation={[-0.9,0,0]}\n            // onPointerOver={handleHoverIn}\n            // onPointerOut={handleHoverOut}\n        >\n            <mesh position={[10,1,0]} visible={false}>\n                {geometry}\n                <meshBasicMaterial/>\n            </mesh>\n            <TextLabel rotation={[0,0,0]} text={\"About Us\"} height={0.3} size={3}/>\n            <mesh position={[3,-6.5,0]}>\n                <TextLabel rotation={[0,0,0]} text={\"To Be Continued....\"} size={1} height={0.2}/>\n            </mesh>\n            <AboutUsHtml position={targetCoords}\n                         visible={eventState === TimelineState.INFO && activePoster === 100 ? \"visible\" : \"invisible\"}/>\n        </mesh>\n    )\n}\n\n// this is the html page that will display.\nconst AboutUsHtml = (props) => {\n\n    return(\n        <group rotation={[-0.9,0,0]} position={[-50,-10,8]}>\n            <Html className={props.visible}>\n                {/* <div className=\"about-container\"> */}\n                    \n                    <iframe src=\"./about.html\" title=\"about\" className=\"about-container\">\n\n                </iframe>\n\n                {/* </div> */}\n            </Html>\n        </group>\n\n    )\n}","import React, { useMemo, useState, useContext } from 'react'\nimport { EventContext, TimelineState } from \"./EventContext\";\nimport { PoIMarkerGroup } from './PoIMarkerGroup';\nimport { PoIThumbnailGroup } from './PoIThumbnailGroup';\nimport { PoIPosterGroup } from './PoIPosterGroup';\nimport { useThree } from \"@react-three/fiber\";\nimport tweenCamera from \"./CameraTravese\";\nimport { AboutUs } from '../More/AboutUs';\n\nconst PoICollection = (props) => {\n\n    const eventData = require(\"./eventData.json\")\n    // const eventData = require(\"./testData.json\")\n    const { eventState, setEventState, timelinePos, ambientIntensity, setAmbientIntensity  } = useContext(EventContext)\n    const { camera } = useThree();\n\n    // spotlight related\n    const [lightPos, SetlightPos] = useState([0, -1, 1])\n    const [lightTarget, SetlightTarget] = useState([0, 0, 0])\n    const [lightIntensity, SetlightIntensity] = useState([0])\n    // const aboutUsButton = useMemo(() =>\n    //     <AboutUs />, [camera]\n    // )\n    \n    const ambientLight = useMemo(() => \n    <ambientLight color=\"#fff\" intensity={ambientIntensity} />, [ambientIntensity])\n\n    const light = useMemo(() => <rectAreaLight\n        position={lightPos}\n        intensity={lightIntensity}\n        angle={0.1}\n        lookAt={lightTarget}\n    />,\n        [lightPos, lightIntensity, lightTarget])\n\n    // lists for collection\n    // const activeStateList = Array.apply(null, Array(20)).map(() => false)\n    // this indicates what poster is active\n    const posterPosList = useMemo(() => calcPosterPos(), [])\n\n    function calcPosterPos() {\n\n        const posterXOffset = 35\n        const posterYOffset = 40\n        const posterYInterval = 13\n        const posterZ = -5\n        const positions = []\n        let australiaIndex = 0\n        let worldIndex = 0\n\n        eventData.events.forEach((element) => {\n\n            let pos = [0, 0, posterZ]\n            if(element.category === \"Australia\"){\n\n                pos[1] = australiaIndex * posterYInterval + posterYOffset\n                australiaIndex++\n                pos[0] = -posterXOffset\n            } else{\n\n                pos[1] = worldIndex * posterYInterval + posterYOffset\n                worldIndex++\n                pos[0] = posterXOffset\n            }\n            positions.push(pos)\n        })\n        return positions\n    }\n\n    function onHoverIn(index) {\n        \n        // this sets the offset\n        SetlightPos([posterPosList[index][0], posterPosList[index][1] - 5, posterPosList[index][2] + 9])\n        SetlightTarget([posterPosList[index][0], posterPosList[index][1], posterPosList[index][2]])\n        SetlightIntensity(3)\n\n    }\n\n    function onHoverOut() {\n        \n        SetlightIntensity(0.1)\n    }\n\n    const handleTraverseBack = () => {\n        if (eventState === TimelineState.PoI) {\n            setAmbientIntensity(0.15)\n            setEventState(TimelineState.DISABLED)\n            tweenCamera(camera, [timelinePos.x, timelinePos.y, timelinePos.z], \"toTimeline\",\n                () => {\n                    setEventState(TimelineState.TIMELINE)\n                })\n        }\n    }\n\n    return (\n        <group\n            onPointerMissed={handleTraverseBack}\n        >\n            {/* {aboutUsButton} */}\n            <PoIMarkerGroup\n                eventData={eventData}\n                platformSettings={props.platformSettings}\n                posterPosList={posterPosList}\n                hoverIn={onHoverIn}\n                hoverOut={onHoverOut}\n            />\n            <PoIThumbnailGroup\n                eventData={eventData}\n                posterPosList={posterPosList}\n                hoverIn={onHoverIn}\n                hoverOut={onHoverOut}\n            />\n            <PoIPosterGroup\n                eventData={eventData}\n                posterPosList={posterPosList}\n                // activePoster={activePoster}\n            />\n            {ambientLight}\n            {light}\n        </group>\n    )\n}\n\nexport default PoICollection;","import {useFrame, useLoader} from \"@react-three/fiber\";\nimport {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\";\nimport React, {useEffect, useRef, useState} from \"react\";\nimport * as THREE from \"three\";\n\n\n// This component was auto-generated from GLTF by: https://github.com/react-spring/gltfjsx\nconst Bird = ({ speed, factor, url, ...props }) => {\n    const { nodes, materials, animations } = useLoader(GLTFLoader, url)\n    const group = useRef()\n    const mesh = useRef()\n    const [start] = useState(() => Math.random() * 5000)\n    const [mixer] = useState(() => new THREE.AnimationMixer())\n    useEffect(() => void mixer.clipAction(animations[0], group.current).play(), [])\n    useFrame((state, delta) => {\n        mesh.current.position.y = Math.sin(start + state.clock.elapsedTime) * 5\n        mesh.current.rotation.x = Math.PI / 2 + (Math.sin(start + state.clock.elapsedTime) * Math.PI) / 10\n        mesh.current.rotation.y = (Math.sin(start + state.clock.elapsedTime) * Math.PI) / 2\n        group.current.rotation.y += Math.sin((delta * factor) / 2) * Math.cos((delta * factor) / 2) * 1.5\n        mixer.update(delta * speed)\n    })\n    return (\n        <group ref={group} dispose={null}>\n            <scene name=\"Scene\" {...props}>\n                <mesh\n                    ref={mesh}\n                    scale={1.5}\n                    name=\"Object_0\"\n                    morphTargetDictionary={nodes.Object_0.morphTargetDictionary}\n                    morphTargetInfluences={nodes.Object_0.morphTargetInfluences}\n                    rotation={[Math.PI / 2, 0, 0]}\n                    geometry={nodes.Object_0.geometry}\n                    material={materials.Material_0_COLOR_0}\n                />\n            </scene>\n        </group>\n    )\n}\n\nconst Birds = ()  => {\n    return new Array(100).fill().map((_, i) => {\n        const x = (15 + Math.random() * 30) * (Math.round(Math.random()) ? -1 : 1)\n        const y = -10 + Math.random() * 20\n        const z = -5 + Math.random() * 10\n        const bird = ['Stork', 'Parrot', 'Flamingo'][Math.round(Math.random() * 2)]\n        let speed = bird === 'Stork' ? 0.25 : bird === 'Flamingo' ? 0.5 : 5\n        let factor = bird === 'Stork' ? 0.5 + Math.random() : bird === 'Flamingo' ? 0.25 + Math.random() : 1 + Math.random() - 0.5\n        return <Bird key={i} position={[x, y, z]} rotation={[0, x > 0 ? Math.PI : 0, 0]} speed={speed} factor={factor} url={`${bird}.glb`} />\n    })\n}\n\nexport default Birds;","import React, { useState, useContext, useMemo} from 'react'\nimport tweenCamera from \"../Events/CameraTravese\"\nimport { EventContext, TimelineState } from '../Events/EventContext';\nimport * as THREE from \"three\";\nimport { useThree } from \"@react-three/fiber\";\nimport {Html} from '@react-three/drei';\nimport TextLabel from \"../Platform/TextLabel\";\n\n// this is the component to display the about us page\n// About us only accessible from the timeline state.\n// uses disabled state when looking at about us\nexport const MoreButton = (props) => {\n\n    // just a geometry that takes us to the position\n    let { eventState, setEventState, setTimelinePos, setActivePoster,  setAmbientIntensity } = useContext(EventContext)\n    const { camera } = useThree();\n\n\n    function handleClick() {\n        const curPosition = new THREE.Vector3().copy(camera.position);\n        if (eventState === TimelineState.TIMELINE) {\n            setAmbientIntensity(1)\n            //reduce lag and make birds visible while traverse\n            setEventState(TimelineState.BIRD);\n            setTimelinePos(curPosition)\n            tweenCamera(camera, props.birdPosition, \"bird\", () => {\n                // display the about us html\n                // random number to stop triggering other posters\n                setActivePoster(99)\n            }, 2500);\n            // activate poster\n        }\n    }\n\n\n    return (\n        <mesh\n            position={[13.5, 20, -3]}\n            onClick={handleClick}\n        >\n            <mesh position={[4,0.5,0]} rotation={[1.5708, 0, 0]} visible={false}>\n                <planeGeometry args={[6.5,2]}/>\n                <meshBasicMaterial />\n            </mesh>\n            <TextLabel text={\"More\"}/>\n        </mesh>\n    )\n}\n\n","import {EventContext, TimelineState} from \"../Events/EventContext\";\nimport tweenCamera from \"../Events/CameraTravese\";\nimport {useThree} from \"@react-three/fiber\";\nimport {AboutUs} from \"./AboutUs\";\nimport Birds from \"./Birds\";\nimport {useContext, Suspense} from \"react\";\nimport {MoreButton} from \"./MoreButton\";\n\n\nconst MoreCollection = (props) => {\n\n    const { eventState, timelinePos, setAmbientIntensity, setEventState} = useContext(EventContext)\n\n    const birdPosition = [10,170,-162];\n\n    const { camera } = useThree();\n\n    const manageTraverseBackAtBird = () => {\n        if (eventState === TimelineState.BIRD) {\n            setAmbientIntensity(0.15)\n            setEventState(TimelineState.DISABLED)\n            tweenCamera(camera, [timelinePos.x, timelinePos.y, timelinePos.z], \"toTimeline\",\n                () => {\n                    setEventState(TimelineState.TIMELINE)\n                },  2500)\n        } else if (eventState === TimelineState.INFO) {\n            setEventState(TimelineState.BIRD)\n            tweenCamera(camera, birdPosition, \"bird\", () => {\n                // display the about us html\n                // random number to stop triggering other posters\n            }, 1500);\n        }\n    }\n\n    return (\n        <>\n            <group className={\"handleVisibility\"} visible={eventState === TimelineState.BIRD ||\n            eventState === TimelineState.INFO}>\n                <group className={\"handleLabels\"} onPointerMissed={manageTraverseBackAtBird} >\n                    <AboutUs birdPosition={birdPosition}/>\n                </group>\n                <Suspense fallback={null}>\n                    <mesh className={\"handleBirdsPositions\"} position={birdPosition}>\n                        <Birds />\n                    </mesh>\n                </Suspense>\n            </group>\n            <MoreButton birdPosition={birdPosition} />\n        </>\n    )\n}\n\nexport  default  MoreCollection;","import React, {useContext, useEffect, useState, useMemo, Suspense} from 'react'\nimport {useFrame, useThree} from '@react-three/fiber'\nimport Platform from \"./Platform/Platform\";\nimport {EventContext, TimelineState} from './Events/EventContext';\nimport PoICollection from './Events/PoICollection';\nimport * as THREE from 'three'\nimport { ModelContext } from './Events/ModelContext';\nimport {Stars} from \"@react-three/drei\";\nimport {GLTFLoader} from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport MoreCollection from \"./More/MoreCollection\";\n\n\nconst platformSettings = {\n    verticalStartCoordinate: -10,\n    verticalInterval: 5,\n    horizontalStartCoordinate: 20,\n    horizontalInterval: 26,\n    monthInterval: 2\n}\n\nconst Scene = () => {\n\n    const { camera, scene } = useThree()\n    // var aboutY = 0\n    const { eventState } = useContext(EventContext)\n\n    const TWEEN = require('@tweenjs/tween.js');\n    // take over the rendering loop\n    useFrame(({ gl, camera, scene }) => {\n        TWEEN.update();\n        gl.render(scene, camera);\n    }, 1)\n\n    useEffect(() => {\n        camera.position.set(0, -10, 8);\n        camera.lookAt(0, 5, 0);\n\n        const loader = new GLTFLoader();\n\n        loader.load('scene.gltf', function (gltf) {\n\n            gltf.scene.position.set(-100, 50, -50)\n            gltf.scene.scale.set(1, 1, 1)\n            scene.add(gltf.scene);\n\n        }, undefined, function (error) {\n\n            console.error(error);\n\n        });\n    }, [])\n\n    useEffect(() => {\n        window.addEventListener('wheel', onMouseWheel, { passive: false })\n        return () => {\n            window.removeEventListener('wheel', onMouseWheel);\n        }\n    }, [eventState])\n\n\n\n    function onMouseWheel(event) {\n        event.preventDefault();\n        if (eventState === TimelineState.TIMELINE && TimelineState.BIRD) {\n            camera.position.y -= event.deltaY * 0.005;\n        }\n    }\n\n    return (\n        <group>\n            <MoreCollection />\n            <Platform platformSettings={platformSettings} />\n            <PoICollection platformSettings={platformSettings} />\\\n        </group>\n    )\n}\n\n\nexport default Scene;\n\nexport const SceneEventController = () => {\n\n    const [eventState, setEventState] = useState(TimelineState.TIMELINE);\n    const [timelinePos, setTimelinePos] = useState([0, 0, 0])\n    const [activePoster, setActivePoster] = useState(null)\n    const [items, setItems] = useState([])\n    const [loaded, setLoaded] = useState(false)\n    const [ambientIntensity, setAmbientIntensity] = useState(0.15)\n\n    const value = { eventState, setEventState, timelinePos, setTimelinePos,\n        activePoster, setActivePoster, items, setItems, loaded, setLoaded,\n        ambientIntensity, setAmbientIntensity\n\n    };\n\n    return (\n        <EventContext.Provider value={value}>\n            <ModelContextProvider />\n        </EventContext.Provider>\n    );\n}\n\nconst ModelContextProvider = () => {\n\n    // load the texture for globe\n    const globeImg = require(\"./Images/earth-reduced.jpg\")\n    const globeTexture = useMemo(() => new THREE.TextureLoader().load(globeImg.default), [])\n    const australiaImg = require(\"./Images/australia-reduced.jpg\")\n    const australiaTexture = useMemo(() => new THREE.TextureLoader().load(australiaImg.default), [])\n    const wallImg = require('./Images/brickWall.jpg')\n    const wallTexture = useMemo(() =>  new THREE.TextureLoader().load(wallImg.default),[])\n    const value = {globeTexture, australiaTexture, wallTexture}\n\n    return (\n        <ModelContext.Provider value={value}>\n            <Scene />\n            <Stars factor={7} fade={true} />\n        </ModelContext.Provider>\n    );\n}\n\n","import './App.css';\nimport { Canvas } from \"@react-three/fiber\";\nimport React from 'react';\nimport {SceneEventController} from './Scene';\nimport {Loader} from \"@react-three/drei\"\n\n\n\n\nconst App = () => {\n\n    return (\n        <>\n            <Canvas>\n                <SceneEventController/>\n                <color attach=\"background\" args={\"#0f1117\"} />\n            </Canvas>\n            <Loader/>\n        </>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './ReactTest/reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}